jQuery(document).ready(function(a){function c(){d(),p(),r(),w(),B(),C()}function d(){a(".pricing").addClass("show_if_ticket-event"),a("select#product-type").change(),a(document.body).bind("woocommerce-product-type-change",function(){e()}),a("#general_product_data").on("click",".yith_wcevti_toggle_button",function(b){b.preventDefault();var c=a(this),d=c.data("panel");a(this).hasClass("expand")?a("#"+d).toggle(!0):a(this).hasClass("close")&&a("#"+d).toggle(!1)}),f(),g(),h(),i(),j(),m()}function e(){var b=a("select#product-type").val();"ticket-event"==b&&a("#general_product_data>.pricing").show()}function f(){a(".yith-wcevti-datepicker").each(function(){a(this).datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0})})}function g(){a(".yith-wceti-timepicker").keyup(function(b){var c=a(this).val().replace(":","");isNaN(c)?(c=a(this).val().slice(0,-1),a(this).val(c)):(2==a(this).val().length&8!=b.keyCode&&a(this).val(a(this).val()+":"),5<a(this).val().length&&(c=a(this).val().slice(0,-1),a(this).val(c)))})}function h(){var b=a("#_enable_reduce_ticket"),c=a("#_reduce_ticket_event_type"),d=a("#_price_reduced_fixed"),e=a("#_price_relative_fixed"),f=a(".yith-woocommerce-event-tickets-panel");b.on("change",function(){var b=a(this);b.is(":checked")?f.show():f.hide()}).change(),c.on("change",function(){var b=a(this);"fixed"==b.val()?(d.parent("p").show(),e.parent("p").hide()):(d.parent("p").hide(),e.parent("p").show())}).change()}function i(){a(".yith_wcevti_increase_by_section").on("click",".remove_increase_item",function(b){b.preventDefault(),a(this).closest("tr").remove()}),a(".yith_wcevti_increase_by_section").on("click",".yith_wcevti_increase_title",function(b){b.preventDefault();var c=a(this),d=c.parent(),e=c.next();e.slideToggle(300,function(){d.toggleClass("opened").toggleClass("closed")})}),a(".yith_wcevti_increase_by_section").on("change",".yith-wceti-increase-type",function(b){var c=a(this).closest("tr");switch(a(this).val()){case"fixed":c.find(".yith-wceti-increase-fixed").show(),c.find(".yith-wceti-increase-percentage").hide();break;case"percentage":c.find(".yith-wceti-increase-fixed").hide(),c.find(".yith-wceti-increase-percentage").show()}}),a(".yith_wcevti_increase_by_section").find("tbody").sortable(),a(".yith-wceti-increase-type").trigger("change")}function j(){k(),a("#_add_increase_stock_row").click({rule:"stock"},n)}function k(){a("._manage_stock_field").addClass("show_if_ticket-event"),a("select#product-type").change(),a(".enable_stock_link").click(o),a("#_manage_stock").change(l),a("#_manage_stock").trigger("change")}function l(){a("#_manage_stock").is(":checked")?(a(".enable-stock").hide(),a(".increase_stock_panel, #_add_increase_stock_row").show()):(a(".enable_stock_link").show(),a(".increase_stock_panel, #_add_increase_stock_row").hide())}function m(){a("#_add_increase_time_row").click({rule:"time"},n)}function n(b){b.preventDefault();var c=b.data.rule;a(".yith_wcevti_increase_"+c+"_section").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var d={action:"print_increase_"+c+"_row_action",index:a(".yith_evti_"+c+"_row").length};a.post(ajaxurl,d).success(function(b){a(".increase_"+c+"_panel").find("table").find("tbody").append(b),a(".yith_wcevti_increase_"+c+"_section").unblock(),a(".yith-wceti-increase-type").trigger("change")})}function o(b){b.preventDefault(),a(".general_tab").removeClass("active"),a(".inventory_tab").addClass("active"),a("#general_product_data").hide(),a("#inventory_product_data").show()}function p(){a("#_add_fields_row").click(q),a("#fields_product_data").on("click",".yith-wceti-remove-field-row button",function(b){b.preventDefault(),a(this).closest("tr").remove()}),a(".field-options").find("tbody").sortable()}function q(b){b.preventDefault(),a("#fields_product_data").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var c={action:"print_field_row_action",index:a(".yith_wcevti_field_row").length};a.post(ajaxurl,c).success(function(b){a(".fields_panel").find("table.field-options tbody").append(b),a("#fields_product_data").unblock()})}function r(){a("#_show_service_type_selector").click(s),a("#_cancel_add_service").click(t),a("#_add_service_row").click(u),a("#services_product_data").on("click",".add_select_button",function(a){v(a)}),a("#services_product_data").on("click",".yith_wcevti_toggle_button",function(b){b.preventDefault();var c=a(this),d=c.data("panel");a(this).hasClass("expand")?a("#"+d).toggle(!0):a(this).hasClass("close")&&a("#"+d).toggle(!1)}),a("#services_product_data").on("click","._service_row_buttons>button",function(b){b.preventDefault();var c=a(this).closest(".yith_wcevti_service_row");a(this).hasClass("add_select_button")&&(c.find(".add_checkbox_button").prop("disabled",!0),c.find(".yith_wcevti-service-type").val("select"),c.find(".yith_wcevti_service_check_panel").hide(),c.find(".yith_wcevti_service_select_panel").show()),a(this).hasClass("add_checkbox_button")&&(c.find(".add_select_button").prop("disabled",!0),c.find(".yith_wcevti_service_check_panel").show(),c.find(".yith_wcevti-service-type").val("checkbox"))}),a("#services_product_data").on("click",".remove_service_row",function(b){b.preventDefault(),confirm(yith_wcevti_admin_tickets.message.remove_service)&&a(this).closest(".yith_wcevti_service_row").remove()}),a("#services_product_data").on("click",".remove_service_item",function(b){b.preventDefault();var c=a(this).closest("tr");c.remove()}),a("#services_product_data").on("click",".yith-evti-service-handle",function(){var b=a(this),c=b.closest(".yith_wcevti_service_row"),d=c.find(".yith-evti-service-panel");d.slideToggle(300,function(){c.toggleClass("opened").toggleClass("closed")})}),a("#services_product_data").on("keyup",".yith-wceti-service-label",function(){var b=a(this),c=b.closest(".yith_wcevti_service_row"),d=c.find(".yith-evti-service-handle").find("h3"),e=b.val();d.text(e.length?e:"-")}),a("#services_product_data").on("change",".service-type-container select",function(){var b=a(this),c=b.val(),d=b.closest(".yith-evti-service-panel"),e=d.closest(".yith_wcevti_service_row "),f=d.find(".service-checkbox-heading"),g=d.find(".service-select-heading"),h=d.find(".yith_wcevti_service_select_panel");service_type_label=e.find(".service-type"),console.log(service_type_label.find(".service-type-select")),"checkbox"==c?(f.css("display","inline-block"),g.hide(),h.hide(),service_type_label.find(".service-type-select").hide().end().find(".service-type-checkbox").show()):"select"==c&&(f.hide(),g.css("display","inline-block"),h.show(),service_type_label.find(".service-type-select").show().end().find(".service-type-checkbox").hide())}),a("#services_product_data").find(".services_panel").sortable(),a(".service-options-select").find("tbody").sortable(),a(".service-type-container select").change()}function s(b){var c=a("#_show_service_type_selector"),d=a("#_service_type_selector_container");"undefined"!=typeof b&&b.preventDefault(),c.hide(),d.slideDown()}function t(b){var c=a("#_show_service_type_selector"),d=a("#_service_type_selector_container");"undefined"!=typeof b&&b.preventDefault(),c.show(),d.slideUp()}function u(c){c.preventDefault(),a("#services_product_data").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var d=b++,e={action:"print_service_row_action",index:d,type:a("#_service_type_selector").val()};a.post(ajaxurl,e).success(function(b){a(".yith-evti-service-panel").slideUp(300,function(){a(this).parent().removeClass("opened").addClass("closed")}),a(".services_panel").prepend(b).find(".yith_wcevti_service_row:first-child").find(".yith-evti-service-panel").slideUp(300,function(){a(this).parent().addClass("opened").removeClass("closed")}),a(".service-type-container select").change(),a(".service-options-select").find("tbody").sortable(),a("#services_product_data").unblock(),t()})}function v(b){b.preventDefault();var c=a(b.target).closest(".yith_wcevti_service_row"),d=c.find(".yith_wcevti_service_select_panel").data("rows");d++,c.find(".yith_wcevti_service_select_panel").data("rows",d);var e=c.data("index");c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var f={action:"print_select_service_row_action",index:d,row_index:e,service_label:""};a.post(ajaxurl,f).success(function(a){c.find(".yith_wcevti_service_select_panel").find("table").find("tbody").append(a),c.unblock()})}function w(){a(document).on("click",".map_options",function(){var b=a("#map_product_data"),c=b.find(".yith_wcevti_address_map");if(c.length>0){var d=b.find(".yith_wcevti_latitude_event").val(),e=b.find(".yith_wcevti_longitude_event").val(),f=new google.maps.LatLng(d,e),g=x(c[0],f),h=y(f,g);A(g,h,f),z(g,b,h),google.maps.event.trigger(g,"resize")}})}function x(a,b){var c={zoom:15,center:b},d=new google.maps.Map(a,c);return d}function y(a,b){var c=new google.maps.Marker({position:a,map:b});return c}function z(a,b,c){var d=b.find(".yith_wcevti_direction_event"),e=b.find(".yith_wcevti_latitude_event"),f=b.find(".yith_wcevti_longitude_event");d.keyup(function(a){13==a.keyCode&&a.preventDefault()});var g=new google.maps.places.SearchBox(d[0]);a.addListener("bounds_changed",function(){g.setBounds(a.getBounds())});g.addListener("places_changed",function(){var b=g.getPlaces();0!=b.length&&(b.forEach(function(b){A(a,c,b.geometry.location)}),e.val(c.getPosition().lat()),f.val(c.getPosition().lng()))})}function A(a,b,c){a.setCenter(c),b.setPosition(c)}function B(){a("#_display_tab_assistants").on("change",function(){var b=a(this);b.is(":checked")?a("._display_organizers_field").show():a("._display_organizers_field").hide()}).change()}function C(){a("#_display_barcode").on("change",function(){var b=a(this);b.is(":checked")?a("._type_barcode_field").show():a("._type_barcode_field").hide()}).change(),a(".yith_wcevti_mail_template_default .yith_wcevti_mail_button").click(function(b){b.preventDefault(),$uri_field=a(this).next(".image_uri"),$id_field=a($uri_field).next(".image_id");var c=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(a){var b=c.state().get("selection").first(),d=b.toJSON().url,e=b.toJSON().id;$uri_field.val(d),$id_field.val(e)})}),a(".yith_wcevti_mail_template_default .yith_wcevti_mail_remove_button").click(function(b){b.preventDefault(),$id_field=a(this).prev(".image_id"),$uri_field=a($id_field).prev(".image_uri"),$id_field.val(""),$uri_field.val("")})}var b=a(".yith_wcevti_service_row").length;c()});