jQuery(document).ready(function(a){function l(){a(".yith-wcevti-datepicker").each(function(){a(this).datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0})})}function m(){a(".yith-wceti-timepicker").keyup(function(b){var c=a(this).val().replace(":","");isNaN(c)?(c=a(this).val().slice(0,-1),a(this).val(c)):(2==a(this).val().length&8!=b.keyCode&&a(this).val(a(this).val()+":"),5<a(this).val().length&&(c=a(this).val().slice(0,-1),a(this).val(c)))})}function n(){var b=a("#_enable_reduce_ticket"),
    c=a("#_reduce_ticket_event_type"),d=a("#_price_reduced_fixed"),e=a("#_price_relative_fixed"),f=a(".yith-woocommerce-event-tickets-panel");b.on("change",function(){a(this).is(":checked")?f.show():f.hide()}).change();c.on("change",function(){"fixed"==a(this).val()?(d.parent("p").show(),e.parent("p").hide()):(d.parent("p").hide(),e.parent("p").show())}).change()}function p(){a(".yith_wcevti_increase_by_section").on("click",".remove_increase_item",function(b){b.preventDefault();a(this).closest("tr").remove()});
    a(".yith_wcevti_increase_by_section").on("click",".yith_wcevti_increase_title",function(b){b.preventDefault();b=a(this);var c=b.parent();b.next().slideToggle(300,function(){c.toggleClass("opened").toggleClass("closed")})});a(".yith_wcevti_increase_by_section").on("change",".yith-wceti-increase-type",function(b){b=a(this).closest("tr");switch(a(this).val()){case "fixed":b.find(".yith-wceti-increase-fixed").show();b.find(".yith-wceti-increase-percentage").hide();break;case "percentage":b.find(".yith-wceti-increase-fixed").hide(),
        b.find(".yith-wceti-increase-percentage").show()}});a(".yith_wcevti_increase_by_section").find("tbody").sortable();a(".yith-wceti-increase-type").trigger("change")}function q(){a("#_manage_stock").is(":checked")?(a(".enable-stock").hide(),a(".increase_stock_panel, #_add_increase_stock_row").show()):(a(".enable_stock_link").show(),a(".increase_stock_panel, #_add_increase_stock_row").hide())}function g(b){b.preventDefault();var c=b.data.rule;a(".yith_wcevti_increase_"+c+"_section").block({message:null,
    overlayCSS:{background:"#fff",opacity:.6}});b={action:"print_increase_"+c+"_row_action",index:a(".yith_evti_"+c+"_row").length};a.post(ajaxurl,b).success(function(b){a(".increase_"+c+"_panel").find("table").find("tbody").append(b);a(".yith_wcevti_increase_"+c+"_section").unblock();a(".yith-wceti-increase-type").trigger("change")})}function r(b){b.preventDefault();a(".general_tab").removeClass("active");a(".inventory_tab").addClass("active");a("#general_product_data").hide();a("#inventory_product_data").show()}
    function t(b){b.preventDefault();a("#fields_product_data").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});b={action:"print_field_row_action",index:a(".yith_wcevti_field_row").length};a.post(ajaxurl,b).success(function(b){a(".fields_panel").find("table.field-options tbody").append(b);a("#fields_product_data").unblock()})}function u(b){var c=a("#_show_service_type_selector"),d=a("#_service_type_selector_container");"undefined"!=typeof b&&b.preventDefault();c.hide();d.slideDown()}function k(b){var c=
        a("#_show_service_type_selector"),d=a("#_service_type_selector_container");"undefined"!=typeof b&&b.preventDefault();c.show();d.slideUp()}function v(b){b.preventDefault();a("#services_product_data").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});b={action:"print_service_row_action",index:w++,type:a("#_service_type_selector").val()};a.post(ajaxurl,b).success(function(b){a(".yith-evti-service-panel").slideUp(300,function(){a(this).parent().removeClass("opened").addClass("closed")});
        a(".services_panel").prepend(b).find(".yith_wcevti_service_row:first-child").find(".yith-evti-service-panel").slideUp(300,function(){a(this).parent().addClass("opened").removeClass("closed")});a(".service-type-container select").change();a(".service-options-select").find("tbody").sortable();a("#services_product_data").unblock();k()})}function x(b){b.preventDefault();var c=a(b.target).closest(".yith_wcevti_service_row");b=c.find(".yith_wcevti_service_select_panel").data("rows");b++;c.find(".yith_wcevti_service_select_panel").data("rows",
        b);var d=c.data("index");c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});a.post(ajaxurl,{action:"print_select_service_row_action",index:b,row_index:d,service_label:""}).success(function(a){c.find(".yith_wcevti_service_select_panel").find("table").find("tbody").append(a);c.unblock()})}function y(a,c,d){var b=c.find(".yith_wcevti_direction_event"),f=c.find(".yith_wcevti_latitude_event"),g=c.find(".yith_wcevti_longitude_event");b.keyup(function(a){13==a.keyCode&&a.preventDefault()});
        var h=new google.maps.places.SearchBox(b[0]);a.addListener("bounds_changed",function(){h.setBounds(a.getBounds())});h.addListener("places_changed",function(){var b=h.getPlaces();0!=b.length&&(b.forEach(function(b){b=b.geometry.location;a.setCenter(b);d.setPosition(b)}),f.val(d.getPosition().lat()),g.val(d.getPosition().lng()))})}var w=a(".yith_wcevti_service_row").length;(function(){a(".pricing").addClass("show_if_ticket-event");a("select#product-type").change();a(document.body).bind("woocommerce-product-type-change",
        function(){"ticket-event"==a("select#product-type").val()&&a("#general_product_data>.pricing").show()});a("#general_product_data").on("click",".yith_wcevti_toggle_button",function(b){b.preventDefault();b=a(this).data("panel");a(this).hasClass("expand")?a("#"+b).toggle(!0):a(this).hasClass("close")&&a("#"+b).toggle(!1)});l();m();n();p();a("._manage_stock_field").addClass("show_if_ticket-event");a("select#product-type").change();a(".enable_stock_link").click(r);a("#_manage_stock").change(q);a("#_manage_stock").trigger("change");
        a("#_add_increase_stock_row").click({rule:"stock"},g);a("#_add_increase_time_row").click({rule:"time"},g)})();(function(){a("#_add_fields_row").click(t);a("#fields_product_data").on("click",".yith-wceti-remove-field-row button",function(b){b.preventDefault();a(this).closest("tr").remove()});a(".field-options").find("tbody").sortable()})();(function(){a("#_show_service_type_selector").click(u);a("#_cancel_add_service").click(k);a("#_add_service_row").click(v);a("#services_product_data").on("click",
        ".add_select_button",function(a){x(a)});a("#services_product_data").on("click",".yith_wcevti_toggle_button",function(b){b.preventDefault();b=a(this).data("panel");a(this).hasClass("expand")?a("#"+b).toggle(!0):a(this).hasClass("close")&&a("#"+b).toggle(!1)});a("#services_product_data").on("click","._service_row_buttons>button",function(b){b.preventDefault();b=a(this).closest(".yith_wcevti_service_row");a(this).hasClass("add_select_button")&&(b.find(".add_checkbox_button").prop("disabled",!0),b.find(".yith_wcevti-service-type").val("select"),
        b.find(".yith_wcevti_service_check_panel").hide(),b.find(".yith_wcevti_service_select_panel").show());a(this).hasClass("add_checkbox_button")&&(b.find(".add_select_button").prop("disabled",!0),b.find(".yith_wcevti_service_check_panel").show(),b.find(".yith_wcevti-service-type").val("checkbox"))});a("#services_product_data").on("click",".remove_service_row",function(b){b.preventDefault();confirm(yith_wcevti_admin_tickets.message.remove_service)&&a(this).closest(".yith_wcevti_service_row").remove()});
        a("#services_product_data").on("click",".remove_service_item",function(b){b.preventDefault();a(this).closest("tr").remove()});a("#services_product_data").on("click",".yith-evti-service-handle",function(){var b=a(this).closest(".yith_wcevti_service_row");b.find(".yith-evti-service-panel").slideToggle(300,function(){b.toggleClass("opened").toggleClass("closed")})});a("#services_product_data").on("keyup",".yith-wceti-service-label",function(){var b=a(this),c=b.closest(".yith_wcevti_service_row").find(".yith-evti-service-handle").find("h3"),
            b=b.val();c.text(b.length?b:"-")});a("#services_product_data").on("change",".service-type-container select",function(){var b=a(this),c=b.val(),d=b.closest(".yith-evti-service-panel"),b=d.closest(".yith_wcevti_service_row "),e=d.find(".service-checkbox-heading"),f=d.find(".service-select-heading"),d=d.find(".yith_wcevti_service_select_panel");service_type_label=b.find(".service-type");console.log(service_type_label.find(".service-type-select"));"checkbox"==c?(e.css("display","inline-block"),f.hide(),
            d.hide(),service_type_label.find(".service-type-select").hide().end().find(".service-type-checkbox").show()):"select"==c&&(e.hide(),f.css("display","inline-block"),d.show(),service_type_label.find(".service-type-select").show().end().find(".service-type-checkbox").hide())});a("#services_product_data").find(".services_panel").sortable();a(".service-options-select").find("tbody").sortable();a(".service-type-container select").change()})();(function(){a(document).on("click",".map_options",function(){var b=
        a("#map_product_data"),c=b.find(".yith_wcevti_address_map");if(0<c.length){var d=b.find(".yith_wcevti_latitude_event").val(),e=b.find(".yith_wcevti_longitude_event").val(),d=new google.maps.LatLng(d,e),c=new google.maps.Map(c[0],{zoom:15,center:d}),e=new google.maps.Marker({position:d,map:c});c.setCenter(d);e.setPosition(d);y(c,b,e);google.maps.event.trigger(c,"resize")}})})();(function(){a("#_display_tab_assistants").on("change",function(){a(this).is(":checked")?a("._display_organizers_field").show():
        a("._display_organizers_field").hide()}).change()})();(function(){a("#_display_barcode").on("change",function(){a(this).is(":checked")?a("._type_barcode_field").show():a("._type_barcode_field").hide()}).change();a(".yith_wcevti_mail_template_default .yith_wcevti_mail_button").click(function(b){b.preventDefault();$uri_field=a(this).next(".image_uri");$id_field=a($uri_field).next(".image_id");var c=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(a){var b=c.state().get("selection").first();
        a=b.toJSON().url;b=b.toJSON().id;$uri_field.val(a);$id_field.val(b)})});a(".yith_wcevti_mail_template_default .yith_wcevti_mail_remove_button").click(function(b){b.preventDefault();$id_field=a(this).prev(".image_id");$uri_field=a($id_field).prev(".image_uri");$id_field.val("");$uri_field.val("")})})()});