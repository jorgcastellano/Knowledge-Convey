jQuery(document).ready(function(b){function r(){b(".field_service_row").each(function(a){if(!l(b(this)))return b(this).find(".content_service_row").toggle(!0),g(this,"incomplete"),!1})}function l(a){var c=!0;a.find(":input[required], select[required]").each(function(a){switch(b(this).prop("tagName").toLocaleLowerCase()){case "input":a=!0;var d=b(this).attr("type");a=h(this)?a:!1;switch(d){case "email":a?(a=RegExp(/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i).test(b(this).val())?
    a:!1)?f(b(this),"good"):f(b(this),"wrong_mail"):f(b(this),"empty");break;case "number":a?(a=b.isNumeric(b(this).val())?a:!1)?f(b(this),"good"):f(b(this),"wrong_number"):f(b(this),"empty");break;default:a?f(this,"good"):f(this,"empty")}c=a?c:!1;break;case "select":a=!0,b(this).is(":disabled")?(b(this).val(""),a=!1):a=h(this)?a:!1,a?f(b(this),"good"):f(b(this),"empty"),c=a?c:!1}});return c}function h(a){var c=!0;null!=b(a).val()?c=0===b(a).val().length?!1:c:(b(a).val(""),c=!1);return c}function t(){var a=
    b(this).val()-b(".field_service_row").length;if(0<a){b(".cart").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});for(var c=0;c<a;c++){var d=b(".field_service_row").length,e=b(".field_service_row").first().clone(),e=m(e,d,!0);b(".fields_panel").append(e);e.find(".content_service_row").toggle(!0)}b(".field_service_row .remove").show();b(".field_service_row .remove").first().hide();k();b(".cart").unblock();n()}else 0!=a&&confirm(yith_wcevti_tickets.messages.ask_for_delete_ticket+" "+-1*
    a+" "+yith_wcevti_tickets.messages.tickets)+"?"&&("undefined"!==typeof Cookies.get("quantity")&&n(),u(a))}function m(a,c,d){a.find("input, select, textarea").each(function(a){a=b(this).attr("name");a=a.replace(/customer\[\d+]/,"customer["+c+"]");b(this).attr("name",a);a=b(this).attr("id");if("undefined"!==typeof a){var e=/customer_\d+/;a=a.replace(e,"customer_"+c);e=/customer\[\d+]/;a=a.replace(e,"customer["+c+"]");b(this).attr("id",a)}"hidden"!==b(this).attr("type")&d&&b(this).val("")});a.find("label").each(function(a){a=
    b(this).attr("for");var d=/customer_\d+/;a=a.replace(d,"customer_"+c);d=/customer\[\d+]/;a=a.replace(d,"customer["+c+"]");b(this).attr("for",a)});var e=a.find(".header_service_row>h3").text(),e=e.slice(0,e.indexOf("#")+1);a.find(".header_service_row>h3").text(e+(c+1));v(a);return a}function w(){var a=b(this).find(":selected"),c=b(this).closest(".service_panel"),a=c.find("._services_customer_"+a.attr("name")+"_field"),d=parseFloat(b("option:selected",this).data("overcharge"));c.find(".service_range>.select_range").prop("required",
    !1);c.find(".service_range").hide();b(a).find(".yith_wcevti_item_message").remove();b(a).find(".select_range").prop("required",!0);a.show();a.hasClass("service_range")&&a.find(".select_range").trigger("change");p(c,d)}function u(a){a*=-1;var c=b(".field_service_row").length-a;b(".field_service_row").each(function(a,e){0<a&a>=c&&(q(b(e)),e.remove())});k()}function p(a,c){$price_service=parseFloat(b(a).attr("data-price_service"));$overchage=parseFloat(c);$total_price=parseFloat(b(".yith_evti_total_price").attr("data-current_price"));
    $total_price-=$price_service;$total_price+=$overchage;b(".yith_evti_total_price").attr("data-current_price",$total_price);b(a).attr("data-price_service",$overchage);b(".yith_evti_amount_price").text($total_price)}function k(){$base_price=parseFloat(b('meta[itemprop="price"]').attr("content"));$num_tickets=parseFloat(b(".quantity>input").val());$total_price=$base_price*$num_tickets;b(".yith_evti_total_price").attr("data-current_price",$total_price);b(".service_panel").attr("data-price_service",0);
    b("._select_item").trigger("change");b(".checkbox").trigger("change");b(".yith_evti_amount_price").text($total_price)}function x(){b(".field_service_row").each(function(a){a=b(this);y(a)});Cookies.set("quantity",b(".quantity>input").val(),{path:""})}function y(a){a.find("input, select, textarea").each(function(a){if("hidden"!==b(this).attr("type")){a=b(this).attr("name");var c=b(this).val();switch(b(this).attr("type")){case "checkbox":c=b(this).prop("checked")}Cookies.set(a,c,{path:""})}})}function q(a){a.find("input, select, textarea").each(function(a){Cookies.remove(b(this).attr("name"),
    {path:""})})}function n(){b(".field_service_row").each(function(a){b(this).find("input, select, textarea").each(function(a){a=Cookies.get(b(this).attr("name"));if("undefined"!==typeof a)switch(b(this).attr("type")){case "checkbox":a="true"===a;b(this).prop("checked",a);break;default:b(this).val(a)}h(this)&"hidden"!==b(this).attr("type")&&b(this).closest(".form-field").show()})});"undefined"!==typeof Cookies.get("quantity")&&Cookies.set("quantity",b(".quantity>input").val(),{path:""})}function g(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        c){var d=b(a).closest(".field_service_row").find(".service_message");d.empty();switch(c){case "complete":var e=b("<span/>").addClass("fa fa-check yith_wcevti_item_message yith_wcevti_item_message_complete").text(" "+yith_wcevti_tickets.messages.complete_field_service);b(a).closest(".field_service_row").removeClass("yith_wcevti_item_panel_unstyle yith_wcevti_item_panel_incomplete");b(a).closest(".field_service_row").addClass("yith_wcevti_item_panel_complete");e.appendTo(d);break;case "incomplete":e=
    b("<span/>").addClass("fa fa-close yith_wcevti_item_message yith_wcevti_item_message_incomplete").text(" "+yith_wcevti_tickets.messages.incomplete_field_service),b(a).closest(".field_service_row").removeClass("yith_wcevti_item_panel_unstyle yith_wcevti_item_panel_complete"),b(a).closest(".field_service_row").addClass("yith_wcevti_item_panel_incomplete"),e.appendTo(d)}}function f(a,c){b(a).prev(".yith_wcevti_item_message").remove();$row=b(a).closest(".field_service_row").find(".service_message");switch(c){case "good":var d=
    b("<span/>").addClass("fa fa-check yith_wcevti_item_message yith_wcevti_item_message_good").text(" "+yith_wcevti_tickets.messages.complete_required_item);d.insertBefore(a);g($row,"complete");break;case "empty":d=b("<span/>").addClass("fa fa-close yith_wcevti_item_message yith_wcevti_item_message_empty").text(" "+yith_wcevti_tickets.messages.incomplete_required_item);d.insertBefore(a);g($row,"incomplete");break;case "wrong_mail":d=b("<span/>").addClass("fa fa-close yith_wcevti_item_message yith_wcevti_item_message_empty").text(" "+
    yith_wcevti_tickets.messages.wrong_mail_field);d.insertBefore(a);g($row,"incomplete");break;case "wrong_number":d=b("<span/>").addClass("fa fa-close yith_wcevti_item_message yith_wcevti_item_message_empty").text(" "+yith_wcevti_tickets.messages.wrong_number_field),d.insertBefore(a),g($row,"incomplete");default:b(a).prev(".yith_wcevti_item_message").remove()}}function v(a){a.find(".yith_wcevti_item_message").text("");a.find(".yith_wcevti_item_message").removeClass("fa fa-check fa-close yith_wcevti_item_message_incomplete yith_wcevti_item_message_complete");
    a.removeClass("yith_wcevti_item_panel_complete");a.addClass("yith_wcevti_item_panel_unstyle")}(function(){b(".fields_panel").on("click",".header_service_row",function(){b(this).next().toggle("fast")});b(".fields_panel").on("click",".header_service_row .remove",function(a){a.preventDefault();confirm(yith_wcevti_tickets.messages.ask_for_delete_ticket+" "+yith_wcevti_tickets.messages.ticket)+"?"&&(a=b(this).closest(".field_service_row"),a.remove(),q(a),b(".quantity>input").val(b(".field_service_row").length),
"undefined"!==typeof Cookies.get("quantity")&&Cookies.set("quantity",b(".quantity>input").val(),{path:""}),k(),b(".field_service_row").each(function(a){0!=a&&m(b(this),a,!1)}))});b(".fields_panel").on("change","input, select",function(){var a=b(this).closest(".field_service_row");0!=b(this).prev(".yith_wcevti_item_message_empty, .yith_wcevti_item_message_good").length&&(l(a)||g(a,"incomplete"))});b(".single_add_to_cart_button").on("click",function(){r();x()});var a="undefined"!==typeof Cookies.get("quantity")?
    Cookies.get("quantity"):1;b(".quantity>input").val(a);b(".quantity>input").change(t);b(".quantity>input").trigger("change")})();(function(){b(".fields_panel").on("change","._select_item",w);b("._select_item").trigger("change");b("._select_item").prev(".yith_wcevti_item_message").remove();b(".fields_panel").on("change",".checkbox",function(a){a=b(this).closest(".service_panel");$overchage=b(this).is(":checked")?parseFloat(b(this).attr("data-overcharge")):0;p(a,$overchage)});b(".checkbox").trigger("change")})()});